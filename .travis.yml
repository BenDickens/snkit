language: python
python:
  - "3.5"
  - "3.6"
  # - "3.7" not available on travis as OpenSSL 1.0.2+ is not available on Ubuntu Trusty

before_install:
  - sudo apt-get install -y libspatialindex-dev libgeos-dev gdal-bin

install:
  - pip install -r dev-requirements.txt
  - python setup.py install
  - pip freeze

script:
  - python -m pytest tests

deploy:
  provider: pypi
  user: tomalrussell
  password:
    secure: bpz5/cGpqxi3O2pju44CVTg/H6Nf3XSfRoHDwejNDXAwlZ0cR60jthC/U4JHqMjW968J6SskjimverPCKb+d7HFCm4koG592Bvo11c/SL7I1bOm3yBXMZhXsfrycbSf4WooeVXzsu++bzzehkZzW/NDXv4nCpsWAx/+REyqcmTu7SwxJ6Bve5THYhCSx/dE2Z8POZDguJW0J+KFzlYZRVv/NSn2KGuIURzm8A9ELvx/vL0oVyvwudZmFSnLlddiLFqYmFc6fl4Gyvu/uG1auLECjYXvqL+0bgnmCArvs91X/5EJUUxP61BscPyK3DPIkN/cZMFb2jgEFdSvQ5ob9AEw+jVY2SkzcYkqCShY5AwD9bGKRBcSwALx6yYJJMiZ1GbCy/Xhvt2a1bCw/UR4kTxnwg30BwOXZE0uV2qLH/HO0TPummKkp6XvYzgRtEv0t5MNORPAm3Pt01ss1/iALZS17knnwpbYPF9swT1Psw/uRM+DYzkQhec13Tqtm1B55+nO63HzygFjnB+CEr+7l+g+TpTNAdx5yKJzk6IkZ6zqn8OM9ccucETsDkus45OyTWAiJOdtNzVRJsHPHxo0rUXYT9c4dVpBwQSE0aM4/ksksUlS7CMhR9nmP1z+dSlrfdeByJiHoAL94l0xLl1TIxlVazzE+Y/RLrBupUxkO+hU=
  on:
    tags: true
  skip_existing: true
