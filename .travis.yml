language: python
python:
  - "3.5"
  - "3.6"
  # - "3.7" not available on travis as OpenSSL 1.0.2+ is not available on Ubuntu Trusty

before_install:
  - sudo apt-get install -y libspatialindex-dev libgeos-dev gdal-bin

install:
  - pip install -r dev-requirements.txt
  - python setup.py install
  - pip freeze

script:
  - python -m pytest tests

deploy:
  provider: pypi
  user: tomalrussell
  password:
    secure: GZpNyLeONYgk4t2TNj0R8AtKE5YIaIViFjh5Wvv7S2XogRgzadx+9ng+vOY5VVkvsCCauRz4Q59x+7gBcq8IILSiLXORjXrhuqXgnwtoydsn77ofTH5oZ/VhuF/J2nFDlRcBfhXLvhALl5a/3hVlGIhNiUy83LrZKyO2F87aulozYlQkJhVKREMPFT20HRn6oHqYsY40R+jJnYu14pqJfcOWXTlZ3jILrIJohDiFzHXluDfx/IcSRuSCbi9nPvNMNuEJ4XgVierRrfWbExgW8mjSWw1oZm0CYM0aeczB3dqY9t/D3XOdygVzAuMAqgdiN9EzmeEUEh6EMc4vfkL89mdu8p9PnQuBH6m3gMmygfhBj3QRC7ePc4SF9SHjIRrFCLSzCQVRNxE40KDSpovECUU9KRxctgmAvyx9JbyKI8/OiMDyosUuivr10/NUs1nKv/uHz5h7hjZDRfRCQT1Qz0LUzBn90d6dNwOOz6hMsyIRQjWQIxzl4Tcjxfjxx3EnhOT3baQ84w4FzcUW/cbYf7bal/HS0cgdyuRjbDQc5Pbn2B9AR+vHXUGVS56f3pZO1yT776U+ZxUPpYnWF0RgzQx33RPifVwfPvXutp0HEqTDemxnKXBZTnG2AQ6ZTulKAj1cCbeJrgDOfhDXq8RSNCNnmrqIH9m/l9b1MbEKDQM=
  on:
    tags: true
  skip_existing: true
