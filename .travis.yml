language: python
python:
  - "3.5"
  - "3.6"
  # - "3.7" not available on travis as OpenSSL 1.0.2+ is not available on Ubuntu Trusty

before_install:
  - sudo apt-get install -y libspatialindex-dev libgeos-dev gdal-bin

install:
  - pip install -r dev-requirements.txt
  - python setup.py install
  - pip freeze

script:
  - python -m pytest tests

deploy:
  provider: pypi
  user: tomalrussell
  password:
    secure: D01vkV4PLZS+fD667ult5+Utg6mpCAj+0Wh/S8GEm/D00flGDmWbNiWDrwak7Lji5WAYJmoWr56aoppd7iwAUelrADKErf28QQXL+IVVr3O24bP93jLhAoa4EkFgMQhvuV8XMDoCec3CpF4ZPkCRPLZ1JjYZvZZQit+0sUpRjdhnI9p+3T1Y5XD5D2utn5ORdn0ddU5V03z0OZjNWf97mrM5LBzN1LZS2lat2x2lOfrvCghyY+eubYFHCt6Sw8hF4ZIBJANZgsSLmqBJn2dyEhbw/15Um2bCyLtv5mddVkgVR4yminDlsx5qismyU4gvBGgwtRmV1FZ2eyEW/+ii5aEn6TtKaJ0g++N0Hpw6Dh61EO3a3uqH2zq2ZiODrja1jWYcLshnaoZj6NVO8GKKYjfh6LGWpSL05VxKajy0CS6y8nL0oil/cZQT+5fnFI+4WUFAtkIT1SqnPKq6I45MbvoCtX31rJrByCjhvqWDBeEzTNlgseP/vW47cKtAZWQsWW6KYINjvt5CQ0O4W9pKi/6BJv3bA7yWvClnV8DdsI759amCTm9/pTzgGr1VPQ4b/U4HE9kClrmEXAGi6ugi36sQYYPVvaHFzmzB7aQeyboZxkc7B2obC1i7cLi6FS+GkBMrubOE1vlTu6ELl9Mcu8qgFmg6EquG1VFWFG76gKo=
  on:
    tags: true
  skip_existing: true
